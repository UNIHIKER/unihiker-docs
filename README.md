# UNIHIKER & mkdocs

1. **Install Software**
    - Python
    - Git
    - Visual Studio Code (VSCode)
2. **Install mkdocs and mkdocs-material**
    ```bash
    python -m pip install mkdocs mkdocs-material mkdocs-minify-plugin mkdocs-glightbox
    ```
    If already installed, you can upgrade them:
    ```bash
    python -m pip install --upgrade mkdocs mkdocs-material mkdocs-minify-plugin mkdocs-glightbox
    ```
3. **Clone the Repository**
4. **Navigate to the cloned repository's path** in the command line (where you can see the `mkdocs.yml` file), and run the local mkdocs test server:
    ```bash
      
   python -m mkdocs serve -a 0.0.0.0:8000
   
   ```
5. **Access the local test server** using a web browser by visiting [127.0.0.1:8000](http://127.0.0.1:8000/).


## How to deploy a document server on unihiker:

- Compile this document into html:

```
cd ~
git clone https://github.com/UNIHIKER/unihiker-docs

cd unihiker-docs

mkdocs build

```

- Install nginx:

```
apt-get install nginx -y
```

- Modify the nginx configuration file, change the port to 8000, and the webpage file directory to /root/unihiker-docs/site/

```
nano /etc/nginx/sites-available/default

```

Change the two 80s after server's listen to 8000
Change the server's root /var/www/html; to root /root/unihiekr-docs/site;

The modified part of the code is as follows:

```

server {
        listen 8000 default_server;
        listen [::]:8000 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Note: You should disable gzip for SSL traffic.
        # See: https://bugs.debian.org/773332
        #
        # Read up on ssl_ciphers to ensure a secure configuration.
        # See: https://bugs.debian.org/765782
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        #root /var/www/html;
        root /root/unihiker-docs/site;

        # Add index.php to the list if you are using PHP
        index index.html index.htm index.nginx-debian.html;

```

- Since the webpage is in the root folder, you need to modify the folder permissions

```
sudo chown -R www-data:www-data /root/unihiker-docs/site
sudo chmod o+x /root
```

- Then reload nginx

```
sudo systemctl restart nginx
```

- Access unihiker's ip:8000 to open the webpage. For example, http://10.1.2.3:8000

- Use scripts to check repository updates and automatically pull updated web pages: 

```bash
chmod +x ~/unihiker-docs/git_check.sh

crontab -e

*/5 * * * * ~/unihiker-docs/git_check.sh

```